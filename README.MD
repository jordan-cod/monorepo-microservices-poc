# PoC - Monorepo com MicroserviÃ§os e Docker

Esta PoC foi criada para validar uma arquitetura onde um **monorepo** gerencia mÃºltiplos **microserviÃ§os**, cada um isolado em seu prÃ³prio repositÃ³rio Git e orquestrado com Docker.

---

## Problema

Trabalhar com mÃºltiplos microserviÃ§os espalhados em repositÃ³rios diferentes tem gerado bastante frustraÃ§Ã£o. Toda vez que preciso testar algo que envolve mais de um serviÃ§o, a experiÃªncia Ã© complicada:

Ã‰ difÃ­cil orquestrar tudo localmente de forma confiÃ¡vel

O alinhamento de dependÃªncias vira uma tarefa manual

Deploys sincronizados sÃ£o mais complexos do que deveriam

E testar o sistema como um todo exige muito esforÃ§o extra

---

## SoluÃ§Ã£o Testada

- Um **monorepo central** que adiciona os microserviÃ§os como **submÃ³dulos Git**.
- Cada microserviÃ§o possui:
  - Um `Dockerfile` prÃ³prio
  - Sua prÃ³pria rota `/ping` para healthcheck
- Um arquivo `docker-compose.yml` orquestra todos os serviÃ§os.
- O `gateway` (ex: NGINX) atua como ponto de entrada Ãºnico.
- Healthchecks garantem que os serviÃ§os estÃ£o disponÃ­veis antes do `gateway` iniciar.

---

## Como rodar o projeto

### 1. Clonar o repositÃ³rio com os submÃ³dulos

```bash
git clone --recurse-submodules https://github.com/jordan-cod/monorepo-microservices-poc
cd monorepo-microservices-poc
```

Se esquecer a flag, use:

```bash
git submodule update --init --recursive
```

---

### 2. Rodar os containers com Docker

```bash
docker-compose up --build
```

---

### 4. Testar os serviÃ§os

Acesse via navegador ou `curl`:

- ğŸŸ¢ Auth: http://localhost/auth/ping
- ğŸŸ¢ Payments: http://localhost/payments/ping
- ğŸŸ¢ Profile: http://localhost/profile/ping

> As rotas acima assumem que o gateway estÃ¡ roteando corretamente para os serviÃ§os.

---

## ğŸ“ Estrutura do Monorepo

```
monorepo-microservices/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ auth/        # SubmÃ³dulo Git
â”‚   â”œâ”€â”€ payments/    # SubmÃ³dulo Git
â”‚   â””â”€â”€ profile/     # SubmÃ³dulo Git
â”œâ”€â”€ gateway/         # NGINX ou outro API Gateway
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

---

## âœ… Status atual

- [x] Estrutura bÃ¡sica funcional com 3 serviÃ§os
- [x] ComunicaÃ§Ã£o entre serviÃ§os via hostname Docker
- [x] Healthcheck automÃ¡tico para garantir readiness
- [ ] IntegraÃ§Ã£o com CI/CD (futuro)
- [ ] Testes (futuro)

---

## ğŸ§  ConclusÃ£o

Essa PoC Ã© uma forma de testar, na prÃ¡tica, se um monorepo com submÃ³dulos Git pode realmente simplificar nosso fluxo de desenvolvimento. A ideia Ã© facilitar a orquestraÃ§Ã£o local, melhorar os testes integrados e reduzir a dor de lidar com mÃºltiplos serviÃ§os â€” sem abrir mÃ£o da independÃªncia que cada um precisa ter.